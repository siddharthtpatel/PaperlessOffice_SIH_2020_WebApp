{% extends 'layout.html' %}
{% load static %}
{% block content %}

  <!-- Main layout -->
  <main style=>

    <section class="mt-md-4 pt-md-2 mb-5 pb-2">

        <!-- Grid row -->
        <div class="row">
          <style>
            #banner {
              border-radius: 5px;
              background: rgb(63, 81, 181);
              padding: 10px;
              width: auto;
              height: 60px;  
            }
          </style>

          <!-- Grid column -->
          <div class="col col-md-6 mb-0">

            <!-- Card -->
            <div class="card card-cascade cascading-admin-card">

              <!-- Card Data -->
              <div class="admin-up mb-0">
                <p id="banner" class="z-depth-2 green" style="margin-bottom: 10px;">
                  <i class="far fa-newspaper pb-1" style="margin-left: 10px; padding: 0px;"></i>
                  <label style="font-size: 30px; margin-left: 10px; color: white;">Circulars</label>
                </p>
              </div>
              <!-- Card content -->
              <div class="card-body card-body-cascade pb-3">
                  <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                      <div class="row">
                        <div class="col-4">
                          Siddharth
                        </div>
                        <div class="col-1">|</div>
                        <div class="col">
                          Meeting today at 4pm
                        </div>
                      </div>  
                    </li>
                    <li class="list-group-item">
                    <div class="row">
                      <div class="col-4">
                         Shrey
                      </div>
                      <div class="col-1">|</div>
                      <div class="col">
                        CEO adddress 27th at 5pm
                      </div>
                    </div>
                    </li>
                    <li class="list-group-item">
                      <div class="row">
                        <div class="col-4">
                          Manjot
                        </div>
                        <div class="col-1">|</div>
                        <div class="col">
                          Office Holiday on 31st
                        </div>
                      </div>
                    </li>
                  </ul>
              </div>

            </div>
            <!-- Card -->

          </div>
          <!-- Grid column -->


                    <!-- Grid column -->
                    <div class="col-xl-3 col-md-6 mb-md-0 mb-4">

                      <!-- Card -->
                      <div class="card card-cascade cascading-admin-card">
          
                        <!-- Card Data -->
                        <div class="admin-up">
                          <i class="fas fa-file-alt green  mr-3 z-depth-2"></i>
                          <div class="data">
                            <p class="text-uppercase"><b>Applications</b></p>
                          </div>
                        </div>
          
                        <!-- Card Content -->
                        <div class="card-body card-body-cascade pb-2 ml-4">
                          <div class="row">
                            <div class="col-7">
                                <p class="text-uppercase" style="font-size:15px">Pending</p>
                            </div>
                            <div class="col-4">
                              <p class="text-uppercase ml-2" style="font-size:15px">{{ pending_applications }}</p>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-7">
                                <p class="text-uppercase" style="font-size:15px">Signed</p>
                            </div>
                            <div class="col-4">
                              <p class="text-uppercase ml-2" style="font-size:15px">{{ signed_applications }}</p>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-7">
                                <p class="text-uppercase" style="font-size:15px">Rejected</p>
                            </div>
                            <div class="col-4">
                              <p class="text-uppercase ml-2" style="font-size:15px">{{ rejected_applications }}</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Grid column -->

          <!-- Grid column -->
          <div class="col-xl-3 col-md-6 mb-xl-0 mb-4">

            <!-- Card -->
            <div class="card card-cascade cascading-admin-card">

              <!-- Card Data -->
              <div class="admin-up">
                <i class="fas fa-tree green fa-2x mr-4 z-depth-2" style="width: 90px; padding: 30px;"></i>
                <div class="data">
                  <p class="text-uppercase">Trees Saved</p>
                  <h4 class="font-weight-bold dark-grey-text">{{ trees_saved }}</h4>
                </div>
              </div>
            </div>
            <!-- Card -->
            <br>
            <!-- Card -->
            <div class="card card-cascade cascading-admin-card">

              <!-- Card Data -->
              <div class="admin-up">
                <i class="fas fa-piggy-bank green mr-3 z-depth-2"></i>
                <div class="data">
                  <p class="text-uppercase">Money Saved</p>
                  <h4 class="font-weight-bold dark-grey-text">Rs {{ money_saved }}</h4>
                </div>
              </div>
            </div>
            <!-- Card -->

          </div>
          <!-- Grid column -->

       
        </div>
        <!-- Grid row -->

      </section>
    <!-- end-->
    <div class="container">
      <div class="row">

        <div class="col-6">
          <div class="card">
            <div class="card-header green white-text " style="height: 50px;">
                <div class="row">
                  <div class="col">
                    <h5 class="font-weight-500 my-1">Applications</h5>
                  </div>
                  <div class="col-1">
                    <a href="{% url 'application' %}" title="Go to Applications" >
                      <span aria-hidden="true"><i class="fas fa-external-link-alt" style="color: white;"></i></span>
                    </a>
                  </div>
                </div> 
            </div>

              {% if applications|length < 1 %}
              <div class="mt-3 container text-center">
                  <h4>You don't have any Applications!</h4>
                  <p>Please apply for applications.</p>
              </div>
              {% else %}
              {% for doc in applications %}
              <div class="card">
                  <div class="card-body">
                      <div class="row">
                          <div class="col-8 mt-2">
                              <div class="mx-2">
                                  <h5 class="black-text">{{ doc.name }}</h5>
                              </div>
                              <div class="mx-2 mt-3">
                                  {% if doc.isCreator %}
                                      <p class="grey-text">Waiting for {{doc.assignedName }} to sign.</p>
                                  {% else %}
                                      <p class="grey-text">Submitted by {{ doc.creatorName }} on {{ doc.timestamp }}</p>
                                  {% endif %}
                              </div>
                          </div>
                          <div class="col-4">
                              <div class="text-center">
                                  <div class="mt-1">
                                      <span class="badge badge-success mb-4">{{ doc.stage }}/{{ doc.stages }}</span>
                                      <div class="progress md-progress float-right"
                                           style="height:15px;">
                                          <div class="progress-bar progress-bar-striped green progress-bar-animated"
                                               role="progressbar" style="width: {{ doc.progress }}%;height: 15px"
                                               aria-valuenow="{{ doc.stage }}" aria-valuemin="0"
                                               aria-valuemax="{{ doc.stages }}">
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
              {% endfor %}
              {% endif %}
            </div>
          </div>
          <!-- Panel -->

          <div class="col-6">

            <!-- Card -->
            <div class="card">
              <div class="card-header green white-text" style="height: 50px;">           
                  <div class="row">
                    <div class="col">
                      <h5 class="font-weight-500 my-1"> Storage</h5>
                    </div>
                    <div class="col-1">
                      <a href="{% url 'storage' %}" title="Go to Storage" >
                        <span aria-hidden="true"><i class="fas fa-external-link-alt" style="color: white;"></i></span>
                      </a>
                    </div>
                  </div> 
              </div>
              <style>
                .card-wrapper {
                  min-height: 200px;
                }
              </style>

              {% if docs|length < 1 %}
              <div class="mt-3 container text-center"  style="height: 200px;">
                  <h4>Your Storage is empty!</h4>
                  <p>Please add new Documents.</p>
              </div>
              {% else %}
              <!-- Card content -->
              <div class="card-body card-columns pb-1" >

                  {% for doc in docs %}
                  <!-- Card -->
                  <div class="card-wrapper mb-3" style="height: 200px;">
                      <div id="card-{{ doc.id }}" class="card card-rotating" style="height:200px">

                          <div class="face front">
                              <div class="view overlay"  style="height: 200px;">
                                  {% if not doc.file_url %}
                                  <img src="{% static 'img/file_404.png' %}" class="img-fluid img-thumbnail h-100" alt="{{ doc.fileName }}">
                                  {% else %}
                                  <img src="{{ doc.file_url }}" class="img-fluid img-thumbnail" style="object-fit: fill;" alt="{{ doc.fileName }}">
                                  {% endif %}
                                  <a class="rotate-btn" data-card="card-{{ doc.id }}">
                                      <div class="mask flex-center rgba-blue-light" style="height: 200px;">
                                          <h4 class="white-text">{{ doc.fileName }}</h4>
                                      </div>
                                  </a>
                              </div>
                          </div>

                          <div class="face back">
                              <div class="card-body custom-dark">
                                  <!-- Content -->
                                  <h6 class="font-weight-bold mb-0">{{ doc.fileName }}
                                      <a class="rotate-btn float-right" data-card="card-{{ doc.id }}"><i
                                              class="fas fa-undo"></i></a>
                                  </h6>
                                  <hr>
                                  <p>
                                      {{ doc.fileDesc }}
                                  </p>
                              </div>

                              <div class="card-footer custom-dark">
                                  <a class="link-text text-center mt-2">
                                      <h6>View <i class="fas fa-angle-double-right"></i></h6>
                                  </a>
                              </div>
                          </div>
                      </div>
                  </div>
                  <!-- Card -->
                  {% endfor %}
              </div>
              {% endif %}
          </div>
        </div>
      </div>
          <!-- Row -->
      </section>
    </div>
    <!-- container -->

  </main>
  <!-- Main layout -->
{% endblock %}